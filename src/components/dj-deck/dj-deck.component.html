<div class="grid grid-cols-12 gap-2 p-2 rounded h-[70vh]" [class]="'bg-' + theme().neutral + '-900'">
  <!-- Mixer Section -->
  <div class="col-span-2 flex flex-col items-center p-2 rounded gap-4" [class]="'bg-' + theme().neutral + '-800'">
    <h3 class="text-lg font-bold" [class]="'text-' + theme().accent + '-400'">[ MASTER ]</h3>

    <!-- VU Meters -->
    <div class="w-full flex justify-around gap-1">
      <div class="flex flex-col items-center gap-1">
        <span class="text-xs">[ A ]</span>
        <div class="w-4 h-32 bg-black border" [class]="'border-' + theme().accent + '-700/50'"></div>
      </div>
      <div class="flex flex-col items-center gap-1">
        <span class="text-xs">[ MSTR ]</span>
        <div class="w-4 h-32 bg-black border" [class]="'border-' + theme().accent + '-700/50'"></div>
      </div>
      <div class="flex flex-col items-center gap-1">
        <span class="text-xs">[ B ]</span>
        <div class="w-4 h-32 bg-black border" [class]="'border-' + theme().accent + '-700/50'"></div>
      </div>
    </div>

    <!-- Crossfader -->
    <div class="w-full">
      <input type="range" class="w-full" min="-1" max="1" step="0.01" [(ngModel)]="crossfade">
    </div>

    <!-- Master Controls -->
    <div class="flex flex-col gap-2 w-full">
        <button class="p-2 border text-xs" [class.bg-red-500]="phantomPowerEnabled()" (click)="phantomPowerEnabled.set(!phantomPowerEnabled())">[ 48V ]</button>
        <button class="p-2 border text-xs" [class.bg-blue-500]="midiEnabled()" (click)="midiEnabled.set(!midiEnabled())">[ MIDI ]</button>
        <button class="p-2 border text-xs" (click)="showSampleLibrary.set(!showSampleLibrary())">[ SAMPLES ]</button>
    </div>

    <!-- File Management -->
    <div class="flex flex-col gap-2 w-full mt-auto">
        <button class="p-2 border text-xs">[ LOAD TRACK A ]</button>
        <button class="p-2 border text-xs">[ LOAD TRACK B ]</button>
    </div>
  </div>

  <!-- Deck A -->
  <div class="col-span-5 flex flex-col gap-2 p-2 rounded" [class]="'bg-' + theme().neutral + '-800'">
    <div class="flex justify-between items-center">
      <h3 class="text-lg" [class]="'text-' + theme().accent + '-400'">[ DECK A ]</h3>
      <div class="text-xs">{{ deckA().track.name }}</div>
    </div>
    <div class="w-full aspect-square bg-neutral-900 rounded-full flex items-center justify-center relative">
      <img [src]="deckA().track.albumArtUrl" class="w-48 h-48 rounded-full object-cover">
      <div class="absolute top-0 left-0 w-full h-full rounded-full" style="background-image: radial-gradient(circle, transparent 70%, rgba(0,0,0,0.8) 71%);"></div>
    </div>
    <div class="flex items-center justify-around gap-2 text-sm">
      <button class="p-2 border">[ CUE ]</button>
      <button class="p-4 border text-2xl">[ PLAY ]</button>
      <button class="p-2 border">[ SYNC ]</button>
    </div>
     <div class="flex items-center gap-2">
      <span class="text-sm">[ PITCH: {{ pitchAPercentage() }} ]</span>
      <input type="range" class="w-full" min="0.5" max="1.5" step="0.001" [(ngModel)]="deckA().playbackRate">
    </div>
  </div>

  <!-- Deck B or Sample Library -->
  <div class="col-span-5 flex flex-col gap-2 p-2 rounded" [class]="'bg-' + theme().neutral + '-800'">
    @if (showSampleLibrary()) {
      <app-sample-library [theme]="theme()"></app-sample-library>
    } @else {
      <div class="flex justify-between items-center">
        <h3 class="text-lg" [class]="'text-' + theme().accent + '-400'">[ DECK B ]</h3>
        <div class="text-xs">{{ deckB().track.name }}</div>
      </div>
      <div class="w-full aspect-square bg-neutral-900 rounded-full flex items-center justify-center relative">
        <img [src]="deckB().track.albumArtUrl" class="w-48 h-48 rounded-full object-cover">
        <div class="absolute top-0 left-0 w-full h-full rounded-full" style="background-image: radial-gradient(circle, transparent 70%, rgba(0,0,0,0.8) 71%);"></div>
      </div>
      <div class="flex items-center justify-around gap-2 text-sm">
        <button class="p-2 border">[ CUE ]</button>
        <button class="p-4 border text-2xl">[ PLAY ]</button>
        <button class="p-2 border">[ SYNC ]</button>
      </div>
      <div class="flex items-center gap-2">
        <span class="text-sm">[ PITCH: {{ pitchBPercentage() }} ]</span>
        <input type="range" class="w-full" min="0.5" max="1.5" step="0.001" [(ngModel)]="deckB().playbackRate">
      </div>
    }
  </div>
</div>