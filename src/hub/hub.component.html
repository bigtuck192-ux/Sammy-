
<div class="hub-container">
  <!-- Header -->
  <header class="hub-header">
    <div class="logo">
      <img src="assets/tha-spot-logo.png" alt="Tha Spot">
      <span>Tha Spot</span>
    </div>
    <div class="hub-actions">
      <button class="action-btn">Friends</button>
      <button class="action-btn">Leaderboards</button>
      <div class="user-profile">
        <img src="https://i.pravatar.cc/40?u=a042581f4e29026704d" alt="User Avatar">
        <span>Smuve</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="hub-body">
    <!-- Left Panel: Filters -->
    <aside class="left-panel">
      <h3>Filters</h3>
      <div class="filter-group">
        <label for="search">Search</label>
        <input type="text" id="search" placeholder="Game name..." [(ngModel)]="filterQuery" (ngModelChange)="applyFilters()">
      </div>
      <div class="filter-group">
        <label for="genre">Genre</label>
        <select id="genre" [(ngModel)]="filterGenre" (ngModelChange)="applyFilters()">
          <option value="">All</option>
          <option>Shooter</option>
          <option>Racing</option>
          <option>Strategy</option>
          <option>Arcade</option>
          <option>Puzzle</option>
        </select>
      </div>
       <div class="filter-group">
        <label for="sort">Sort By</label>
        <select id="sort" [(ngModel)]="filterSort" (ngModelChange)="applyFilters()">
          <option>Popular</option>
          <option>Rating</option>
          <option>Newest</option>
        </select>
      </div>
    </aside>

    <!-- Center Panel: Game Grid -->
    <main class="center-panel">
      <div class="game-grid">
        <div class="game-card" *ngFor="let game of filteredGames()" 
             (mouseenter)="hoveredGame.set(game)" (mouseleave)="hoveredGame.set(null)">
          <div class="card-media">
            <video *ngIf="hoveredGame() === game && game.previewVideo" [src]="game.previewVideo" autoplay muted loop class="preview-video"></video>
            <img *ngIf="hoveredGame() !== game || !game.previewVideo" [src]="game.image" [alt]="game.name" class="cover-image">
          </div>
          <div class="card-body">
            <h4 class="title">{{ game.name }}</h4>
            <div class="metadata">
              <span class="tag" *ngFor="let tag of game.tags">{{ tag }}</span>
              <span class="rating">{{ game.rating }} ★</span>
              <span class="players">{{ game.playersOnline }} playing</span>
            </div>
          </div>
           <div class="card-actions">
            <button class="play-btn" (click)="playGame(game)">Play</button>
            <button class="action-btn" *ngIf="game.modes?.includes('duel')">Duel</button>
            <button class="action-btn" *ngIf="game.modes?.includes('team')">Team Up</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Panel: Activity Feed -->
    <aside class="right-panel">
      <h3>Activity Feed</h3>
      <div class="feed-item" *ngFor="let item of activityFeed()">
        <p [innerHTML]="item"></p>
        <span class="timestamp">
          {{ item.includes('duel') ? '5m ago' : (item.includes('recruiting') ? '12m ago' : (item.includes('online') ? '1h ago' : '3h ago')) }}
        </span>
      </div>
    </aside>
  </div>
  
  <!-- Game Player Overlay -->
  <div class="game-player-overlay" *ngIf="activeGame()">
    <div class="player-header">
      <h3>{{ activeGame()?.name }}</h3>
      <button class="close-btn" (click)="closeGame()">×</button>
    </div>
    <iframe [src]="activeGameUrl()" frameborder="0" allowfullscreen></iframe>
  </div>
</div>
